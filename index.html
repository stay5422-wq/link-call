<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Link Call</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>๐</text></svg>">
    
    <!-- PWA Configuration -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#6c5ce7">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Link Call">
    <link rel="apple-touch-icon" href="/icon-192.png">
    
    <link rel="stylesheet" href="style.css">
    <!-- Twilio Voice SDK v2.11 from unpkg -->
    <script src="https://unpkg.com/@twilio/voice-sdk@2.11.2/dist/twilio.min.js"></script>
</head>
<body>
    <div class="stars" id="stars"></div>
    <div class="container">
        <!-- ุงูุดุฑูุท ุงูุฌุงูุจู -->
        <div class="sidebar">
            <div class="menu-item active" id="dialpad-btn">
                <div class="icon">๐</div>
                <div class="label">ููุญุฉ ุงูููุงุชูุญ</div>
            </div>
            
            <div class="menu-item" id="contacts-btn">
                <div class="icon">๐ฅ</div>
                <div class="label">ุฌูุงุช ุงูุงุชุตุงู</div>
            </div>
            
            <div class="menu-item" id="call-history-btn">
                <div class="icon">๐</div>
                <div class="label">ุณุฌู ุงูููุงููุงุช</div>
            </div>
            
            <div class="menu-item" id="recordings-btn">
                <div class="icon notification">๐๏ธ</div>
                <span class="badge hidden" id="recordings-badge">0</span>
                <div class="label">ุงููุญููุธุงุช</div>
            </div>
            
            <div class="menu-item" id="settings-btn">
                <div class="icon">โ๏ธ</div>
                <div class="label">ุงูุฅุนุฏุงุฏุงุช</div>
            </div>
            
            <div class="bottom-logo-container">
                <img src="logo.jpg" alt="Link Call" class="bottom-logo-img">
                <div class="online-indicator"></div>
            </div>
        </div>

        <!-- ุงููุญุชูู ุงูุฑุฆูุณู -->
        <div class="main-content">
            <div class="header">
                <div class="header-top">
                    <h1>ุฑูู ุงููุงุชู</h1>
                    <div class="user-info-header">
                        <div class="user-badge">
                            <span class="user-icon">๐ค</span>
                            <div class="user-text">
                                <span class="user-name-header" id="header-username">--</span>
                                <span class="user-role-header" id="header-role">--</span>
                            </div>
                        </div>
                        <button class="logout-header-btn" id="logout-header-btn" title="ุชุณุฌูู ุฎุฑูุฌ">
                            <span class="logout-icon">๐ช</span>
                            <span class="logout-text">ุฎุฑูุฌ</span>
                        </button>
                    </div>
                </div>
                <div class="phone-display">
                    <div class="phone-number" id="display-number"></div>
                    <button class="delete-btn hidden" id="delete-btn">โซ</button>
                </div>
            </div>

            <!-- ููุญุฉ ุงูุฃุฑูุงู -->
            <div class="dialpad" id="dialpad">
                <div class="number-pad">
                    <button class="num-btn" data-num="1">
                        <span class="number">1</span>
                    </button>
                    <button class="num-btn" data-num="2">
                        <span class="number">2</span>
                        <span class="letters">ABC</span>
                    </button>
                    <button class="num-btn" data-num="3">
                        <span class="number">3</span>
                        <span class="letters">DEF</span>
                    </button>
                    
                    <button class="num-btn" data-num="4">
                        <span class="number">4</span>
                        <span class="letters">GHI</span>
                    </button>
                    <button class="num-btn" data-num="5">
                        <span class="number">5</span>
                        <span class="letters">JKL</span>
                    </button>
                    <button class="num-btn" data-num="6">
                        <span class="number">6</span>
                        <span class="letters">MNO</span>
                    </button>
                    
                    <button class="num-btn" data-num="7">
                        <span class="number">7</span>
                        <span class="letters">PQRS</span>
                    </button>
                    <button class="num-btn" data-num="8">
                        <span class="number">8</span>
                        <span class="letters">TUV</span>
                    </button>
                    <button class="num-btn" data-num="9">
                        <span class="number">9</span>
                        <span class="letters">WXYZ</span>
                    </button>
                    
                    <button class="num-btn" data-num="*">
                        <span class="number">*</span>
                    </button>
                    <button class="num-btn" data-num="0">
                        <span class="number">0</span>
                        <span class="letters">+</span>
                    </button>
                    <button class="num-btn" data-num="#">
                        <span class="number">#</span>
                    </button>
                </div>

                <button class="call-btn" id="call-btn">
                    ๐
                </button>

                <div class="quick-dial">ุงุชุตุงู ุณุฑูุน</div>
            </div>

            <!-- ุดุงุดุฉ ุงูููุงููุฉ -->
            <div class="call-screen hidden" id="call-screen">
                <div class="call-info">
                    <div class="call-status" id="call-status">ุฌุงุฑู ุงูุงุชุตุงู...</div>
                    <div class="call-number" id="call-number"></div>
                    <div class="call-duration" id="call-duration">00:00</div>
                    <div class="recording-status hidden" id="recording-status">
                        ๐ด ุฌุงุฑู ุงูุชุณุฌูู
                    </div>
                </div>
                
                <div class="call-controls">
                    <button class="control-btn" id="mute-btn">
                        <span class="icon">๐</span>
                        <span class="label">ูุชู ุงูุตูุช</span>
                    </button>
                    <button class="control-btn" id="hold-btn">
                        <span class="icon">โธ๏ธ</span>
                        <span class="label">ุฅููุงู ูุคูุช</span>
                    </button>
                    <button class="control-btn end-call" id="end-call-btn">
                        <span class="icon">๐</span>
                        <span class="label">ุฅููุงุก</span>
                    </button>
                </div>
            </div>

            <!-- ุณุฌู ุงูููุงููุงุช -->
            <div class="call-history-list hidden" id="call-history-list">
                <h2>ุณุฌู ุงูููุงููุงุช</h2>
                <div id="call-history-container">
                    <div class="empty-state">
                        <div class="empty-icon">๐</div>
                        <p>ูุง ุชูุฌุฏ ููุงููุงุช ุญุชู ุงูุขู</p>
                    </div>
                </div>
            </div>

            <!-- ุฌูุงุช ุงูุงุชุตุงู -->
            <div class="contacts-list hidden" id="contacts-list">
                <div class="contacts-header">
                    <h2>ุฌูุงุช ุงูุงุชุตุงู</h2>
                    <button class="add-contact-btn" id="add-contact-btn">
                        <span>+</span> ุฅุถุงูุฉ ุฌูุฉ ุงุชุตุงู
                    </button>
                </div>
                <div class="search-box">
                    <input type="text" id="contact-search" placeholder="ุงุจุญุช ุนู ุฌูุฉ ุงุชุตุงู...">
                    <span class="search-icon">๐</span>
                </div>
                <div id="contacts-container">
                    <div class="empty-state">
                        <div class="empty-icon">๐ฅ</div>
                        <p>ูุง ุชูุฌุฏ ุฌูุงุช ุงุชุตุงู</p>
                        <button class="add-contact-btn-empty">ุฅุถุงูุฉ ุฌูุฉ ุงุชุตุงู</button>
                    </div>
                </div>
            </div>

            <!-- ูุงุฆูุฉ ุงูุชุณุฌููุงุช -->
            <div class="recordings-list hidden" id="recordings-list">
                <h2>ุงูุชุณุฌููุงุช ุงููุญููุธุฉ</h2>
                <div id="recordings-container"></div>
            </div>

            <!-- ุงูุฅุนุฏุงุฏุงุช -->
            <div class="settings-panel hidden" id="settings-panel">
                <h2>ุงูุฅุนุฏุงุฏุงุช</h2>
                <div class="settings-content">
                    <div class="settings-section">
                        <div class="settings-header">
                            <div class="app-icon">
                                <img src="logo.jpg" alt="Link Call">
                            </div>
                            <div class="app-info">
                                <h3>Link Call</h3>
                                <p class="version">ุงูุฅุตุฏุงุฑ 1.0.0</p>
                                <p class="build-date">ุจูุงุก December 7, 2025</p>
                            </div>
                        </div>
                    </div>

                    <!-- ูุณู ูุนูููุงุช ุงูุญุณุงุจ (ูููุทูุฑ ููุท) -->
                    <div class="settings-section" id="admin-account-section" style="display: none;">
                        <h4>ูุนูููุงุช ุงูุญุณุงุจ</h4>
                        <div class="setting-item">
                            <span class="setting-label">ุฑููู ุงูุดุฎุตู</span>
                            <input type="tel" id="user-phone-number" class="setting-input" placeholder="+966559902557" value="">
                        </div>
                        <div class="setting-item">
                            <span class="setting-label">ุฑูู Twilio</span>
                            <span class="setting-value">+1 320 433 6644</span>
                        </div>
                        <div class="setting-item">
                            <span class="setting-label">ุญุงูุฉ ุงูุงุชุตุงู</span>
                            <span class="setting-value status-online">ูุชุตู</span>
                        </div>
                    </div>

                    <!-- ูุณู ุฅุนุฏุงุฏุงุช ุงูุตูุช (ูููุทูุฑ ููุท) -->
                    <div class="settings-section" id="admin-audio-section" style="display: none;">
                        <h4>ุฅุนุฏุงุฏุงุช ุงูุตูุช</h4>
                        <div class="setting-item">
                            <span class="setting-label">ุชุณุฌูู ุงูููุงููุงุช ุชููุงุฆูุงู</span>
                            <label class="switch">
                                <input type="checkbox" id="auto-record" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <span class="setting-label">ุฌูุฏุฉ ุงูุตูุช</span>
                            <select class="setting-select">
                                <option value="high">ุนุงููุฉ</option>
                                <option value="medium" selected>ูุชูุณุทุฉ</option>
                                <option value="low">ููุฎูุถุฉ</option>
                            </select>
                        </div>
                    </div>

                    <!-- ูุณู ุฅุฏุงุฑุฉ ุงูููุธููู (ููุฃุฏูู ููุท) -->
                    <div class="settings-section" id="employee-management-section" style="display: none;">
                        <h4>ุฅุฏุงุฑุฉ ุงูููุธููู</h4>
                        <div id="employees-list" class="employees-list"></div>
                    </div>

                    <div class="settings-section">
                        <h4>ุงูุฅุดุนุงุฑุงุช</h4>
                        <div class="setting-item">
                            <span class="setting-label">ุฅุดุนุงุฑุงุช ุงูููุงููุงุช ุงููุงุฑุฏุฉ</span>
                            <label class="switch">
                                <input type="checkbox" id="call-notifications" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <span class="setting-label">ุตูุช ุงูุฑููู</span>
                            <label class="switch">
                                <input type="checkbox" id="ringtone-sound" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>

                    <!-- ูุณู ุชุนุฏูู ุงูููู ุงูุดุฎุตู (ููููุธููู ููุท) -->
                    <div class="settings-section" id="employee-profile-section" style="display: none;">
                        <h4>โ๏ธ ุงูููู ุงูุดุฎุตู</h4>
                        <div class="form-group">
                            <label>ุงูุงุณู ุงููุงูู:</label>
                            <input type="text" id="profile-fullname" placeholder="ุงูุงุณู ุงููุงูู" class="setting-input">
                        </div>
                        <div class="form-group">
                            <label>ุฑูู ุงููุงุชู:</label>
                            <input type="tel" id="profile-phone" placeholder="+966..." class="setting-input">
                        </div>
                        <div class="form-group">
                            <label>ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ:</label>
                            <input type="password" id="profile-current-password" placeholder="ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ" class="setting-input">
                        </div>
                        <div class="form-group">
                            <label>ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ:</label>
                            <input type="password" id="profile-new-password" placeholder="ุงุชุฑููุง ูุงุฑุบุฉ ุฅู ูู ุชุฑุฏ ุงูุชุบููุฑ" class="setting-input">
                        </div>
                        <button class="btn-primary" id="update-profile-btn">๐พ ุญูุธ ุงูุชุนุฏููุงุช</button>
                    </div>

                    <!-- ูุณู ุฅุฏุงุฑุฉ ุงูููุธููู (ููุฃุฏูู ููุท) -->
                        <h4>๐ ุฅุฏุงุฑุฉ ุงูููุธููู (ูููุทูุฑ ููุท)</h4>
                        <div class="employees-container">
                            <div class="add-employee-form">
                                <h5>ุฅุถุงูุฉ ููุธู ุฌุฏูุฏ</h5>
                                <div class="form-group">
                                    <input type="text" id="emp-username" placeholder="ุงุณู ุงููุณุชุฎุฏู" required>
                                </div>
                                <div class="form-group">
                                    <input type="password" id="emp-password" placeholder="ูููุฉ ุงููุฑูุฑ" required>
                                </div>
                                <div class="form-group">
                                    <input type="text" id="emp-fullname" placeholder="ุงูุงุณู ุงููุงูู" required>
                                </div>
                                <div class="form-group">
                                    <input type="tel" id="emp-phone" placeholder="ุฑูู ุงููุงุชู (+966...)" required>
                                </div>
                                <div class="form-group">
                                    <label>ุงููุณู:</label>
                                    <select id="emp-department" class="setting-select" required>
                                        <option value="">-- ุงุฎุชุฑ ุงููุณู --</option>
                                        <option value="1">ุงูุญุฌูุฒุงุช</option>
                                        <option value="2">ุงููุจูุนุงุช</option>
                                        <option value="3">ุฎุฏูุฉ ุงูุนููุงุก</option>
                                        <option value="4">ุงูุญุณุงุจุงุช</option>
                                        <option value="5">ุงูุฏุนู ุงูููู</option>
                                        <option value="6">ุงูุดูุงูู ูุงูุงูุชุฑุงุญุงุช</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label style="font-weight: bold; margin-bottom: 10px; display: block;">๐ ุงูุตูุงุญูุงุช:</label>
                                    <div style="display: grid; gap: 8px; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; padding: 5px;">
                                            <input type="checkbox" id="emp-perm-view-own-recordings" style="width: auto;">
                                            <span>๐น ูุดุงูุฏุฉ ุงูุชุณุฌููุงุช ุงูุฎุงุตุฉ</span>
                                        </label>
                                        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; padding: 5px;">
                                            <input type="checkbox" id="emp-perm-view-all-recordings" style="width: auto;">
                                            <span>๐ ูุดุงูุฏุฉ ุงูุชุณุฌููุงุช ุงูุนุงูุฉ</span>
                                        </label>
                                        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; padding: 5px;">
                                            <input type="checkbox" id="emp-perm-delete-recordings" style="width: auto;">
                                            <span>๐๏ธ ูุณุญ ุงูุชุณุฌูู</span>
                                        </label>
                                        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; padding: 5px;">
                                            <input type="checkbox" id="emp-perm-edit-profile" style="width: auto;">
                                            <span>โ๏ธ ุชุนุฏูู ุงูููู ุงูุดุฎุตู</span>
                                        </label>
                                    </div>
                                </div>
                                <button class="add-employee-btn" id="add-employee-btn">โ ุฅุถุงูุฉ ููุธู</button>
                            </div>
                            
                            <div class="employees-list">
                                <h5>ุงูููุธููู ุงูุญุงูููู</h5>
                                <div id="employees-list-container">
                                    <!-- ุณูุชู ุฅุถุงูุฉ ุงูููุธููู ููุง -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h4>ุนูุง</h4>
                        <div class="about-text">
                            <p>Link Call - ุชุทุจูู ููุงููุงุช ุณุญุงุจู ูุชูุงูู ูุน Twilio</p>
                            <p class="copyright">ยฉ 2025 ENG/AKRAM ELMASRY. ุฌููุน ุงูุญููู ูุญููุธุฉ.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ุญุงูุฉ ุงูุงุชุตุงู -->
        <div class="connection-status" id="connection-status">
            <span class="status-dot"></span>
            <span id="status-text">ุฌุงุฑู ุงูุงุชุตุงู ุจู Twilio...</span>
        </div>
    </div>

    <script>
        // ุงูุชุญูู ูู ุชุณุฌูู ุงูุฏุฎูู
        if (!sessionStorage.getItem('isLoggedIn')) {
            window.location.href = 'login.html';
        }
    </script>
    <!-- App Script - REST API Mode -->
    <script src="app.js"></script>
    
    <script>
        // ุฅูุดุงุก ุงููุฌูู ุงููุชุญุฑูุฉ
        function createStars() {
            const starsContainer = document.getElementById('stars');
            const numberOfStars = 100;
            
            for (let i = 0; i < numberOfStars; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                star.style.animationDuration = (Math.random() * 3 + 2) + 's';
                starsContainer.appendChild(star);
            }
        }
        
        createStars();
    </script>
</body>
</html>
